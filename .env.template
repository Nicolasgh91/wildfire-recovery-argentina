# =============================================================================
# FORESTGUARD API - VARIABLES DE ENTORNO
# =============================================================================
# Copiar este archivo a .env y completar con valores reales:
#   cp .env.example .env
#
# NUNCA commitear el archivo .env a git
# =============================================================================

# -----------------------------------------------------------------------------
# APLICACIÃ“N
# -----------------------------------------------------------------------------
PROJECT_NAME=ForestGuard API
VERSION=1.0.0
ENVIRONMENT=production                # development | staging | production
DEBUG=false                             # true en desarrollo, false en producciÃ³n
LOG_LEVEL=INFO                         # DEBUG | INFO | WARNING | ERROR
API_V1_PREFIX=/api/v1

# URL pÃºblica (para QR codes en certificados)
PUBLIC_BASE_URL=http://localhost:8000  # En producciÃ³n: https://tu-app.onrender.com

# -----------------------------------------------------------------------------
# SERVIDOR
# -----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8000
WORKERS=4                              # NÃºmero de workers Gunicorn (producciÃ³n)

# -----------------------------------------------------------------------------
# BASE DE DATOS (Supabase PostgreSQL)
# -----------------------------------------------------------------------------
# OpciÃ³n 1: Variables separadas (RECOMENDADO)
DB_HOST=SUPABASE_dB_HOST
DB_PORT=YOURPORT
DB_NAME=postgres
DB_USER=postgres
DB_PASSWORD=<CHANGE_ME_use_strong_password>


# OpciÃ³n 2: URL completa (alternativa)
# DATABASE_URL=postgresql://postgres:[PASSWORD]@db.[PROJECT_REF].supabase.co:5432/postgres

# Pool de conexiones
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# -----------------------------------------------------------------------------
# SUPABASE (APIs adicionales)
# -----------------------------------------------------------------------------
# Obtener de: Supabase Dashboard â†’ Settings â†’ API
SUPABASE_URL=https://[PROJECT_REF].supabase.co
SUPABASE_ANON_KEY=YOUR_PASSWORD...       # Clave pÃºblica (anon)
SUPABASE_JWT_SECRET=your-supabase-jwt-secret
SUPABASE_JWT_AUDIENCE=authenticated

# -----------------------------------------------------------------------------
# REDIS (Celery Broker + Cache)
# -----------------------------------------------------------------------------
# Local: redis://localhost:6379/0
# ProducciÃ³n: usar Upstash, Railway, o similar
REDIS_URL=redis://localhost:PORT/0
CELERY_BROKER_URL=redis://localhost:PORT/1
CELERY_RESULT_BACKEND=redis://localhost:PORT/2

# GCS project + credentials (service account JSON file)
GCS_PROJECT_ID=your-gcp-project-id
GCS_SERVICE_ACCOUNT_JSON=
# Alternative: GOOGLE_APPLICATION_CREDENTIALS=/absolute/path/to/key.json

# Buckets
STORAGE_BUCKET_IMAGES=YOUR-BUCKET-1
STORAGE_BUCKET_REPORTS=YOUR-BUCKET-2
STORAGE_BUCKET_CERTIFICATES=YOUR-BUCKET-3

# Optional public base URL (custom domain/CDN). Example: https://storage.googleapis.com
STORAGE_PUBLIC_URL=

# Local fallback (only if STORAGE_BACKEND=local)
STORAGE_LOCAL_PATH=storage

# -----------------------------------------------------------------------------
# APIs EXTERNAS
# -----------------------------------------------------------------------------
# NASA FIRMS - API key para datos NRT (Near Real Time)
# Obtener en: https://firms.modaps.eosdis.nasa.gov/api/area/
FIRMS_API_KEY=your_firms_api_key
NASA_FIRMS_BASE_URL=https://firms.modaps.eosdis.nasa.gov

# Open-Meteo - Gratuita, sin API key
# https://open-meteo.com/
OPEN_METEO_BASE_URL=https://archive-api.open-meteo.com/v1

# Google Earth Engine (opcional, para imÃ¡genes Sentinel-2)
# Crear service account en: https://console.cloud.google.com
# IMPORTANTE: Guardar el archivo JSON en secrets/ (nunca commitearlo)
GEE_PROJECT_ID="YOUR-PROJECT-ID"
GEE_SERVICE_ACCOUNT_EMAIL="YOUR-ACCOUNT-ID"
# UC-15: Umbral de nubosidad (ajustable sin redeploy)
MAX_CLOUD_COVERAGE=20

# UC-F08: Carousel thumbnail tuning
# - Dimensions accepts WIDTHxHEIGHT or a single int (max side).
# - Resample options: nearest | bilinear | bicubic | none
CAROUSEL_THUMB_DIMENSIONS=768x576
CAROUSEL_GEE_RESAMPLE=bicubic
CAROUSEL_BBOX_BUFFER_DEG=0.04

# UC-F08: Watermark logo used inside thumbnails (optional override).
# Default: app/assets/branding/watermark-logo.png
WATERMARK_LOGO_PATH=

# -----------------------------------------------------------------------------
# SEGURIDAD
# -----------------------------------------------------------------------------
# Generar con: openssl rand -hex 32
SECRET_KEY=<CHANGE_ME>
JWT_ALGORITHM=
JWT_EXPIRE_MINUTES=            

# API Key Authentication (required for /audit and /certificates endpoints)
API_KEY=<CHANGE_ME>

# Security Alert Email (receives notifications when IPs are blocked)
ALERT_EMAIL=admin@example.com

# CORS - OrÃ­genes permitidos (separados por coma)
ALLOWED_ORIGINS=http://localhost:PORT,http://localhost:PORT,https://forestguard.ar

# Rate limiting
RATE_LIMIT_PER_MINUTE=10               # Requests por minuto por IP

# -----------------------------------------------------------------------------
# MERCADOPAGO (UC-13)
# -----------------------------------------------------------------------------
MERCADOPAGO_ACCESS_TOKEN=<OBTENER_DESDE_DASHBOARD_MP>
MP_ACCESS_TOKEN=APP_USR-xxx-xxx
MP_WEBHOOK_SECRET=xxx
MP_NOTIFICATION_URL=https://api.forestguard.ar/api/v1/webhooks/mercadopago
MP_MOCK_MODE=false
MP_MOCK_APPROVE=true
BNA_EXCHANGE_RATE_URL=https://www.bna.com.ar/Personas

PAYMENT_SUCCESS_URL=https://forestguard.ar/payments/return?status=success
PAYMENT_FAILURE_URL=https://forestguard.ar/payments/return?status=failure
PAYMENT_PENDING_URL=https://forestguard.ar/payments/return?status=pending

# -----------------------------------------------------------------------------
# EMAILS (opcional, para notificaciones)
# -----------------------------------------------------------------------------
SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASSWORD=
EMAIL_FROM=

# -----------------------------------------------------------------------------
# MONITOREO (opcional)
# -----------------------------------------------------------------------------
SENTRY_DSN=https://xxx@sentry.io/xxx   # Error tracking
