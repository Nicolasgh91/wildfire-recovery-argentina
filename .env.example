# =============================================================================
# FORESTGUARD API - VARIABLES DE ENTORNO
# =============================================================================
# Copiar este archivo a .env y completar con valores reales:
#   cp .env.example .env
#
# NUNCA commitear el archivo .env a git
# =============================================================================

# -----------------------------------------------------------------------------
# APLICACIÓN
# -----------------------------------------------------------------------------
PROJECT_NAME=ForestGuard API
VERSION=1.0.0
ENVIRONMENT=production                # development | staging | production
DEBUG=false                             # true en desarrollo, false en producción
LOG_LEVEL=INFO                         # DEBUG | INFO | WARNING | ERROR
API_V1_PREFIX=/api/v1

# URL pública (para QR codes en certificados)
PUBLIC_BASE_URL=http://localhost:8000  # En producción: https://tu-app.onrender.com

# -----------------------------------------------------------------------------
# SERVIDOR
# -----------------------------------------------------------------------------
HOST=0.0.0.0
PORT=8000
WORKERS=4                              # Número de workers Gunicorn (producción)

# -----------------------------------------------------------------------------
# BASE DE DATOS (Supabase PostgreSQL)
# -----------------------------------------------------------------------------
# Opción 1: Variables separadas (RECOMENDADO)
DB_HOST=db.[PROJECT_REF].supabase.co
DB_PORT=5432
DB_NAME=postgres
DB_USER=postgres
DB_PASSWORD=your_supabase_password

# Opción 2: URL completa (alternativa)
# DATABASE_URL=postgresql://postgres:[PASSWORD]@db.[PROJECT_REF].supabase.co:5432/postgres

# Pool de conexiones
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10

# -----------------------------------------------------------------------------
# SUPABASE (APIs adicionales)
# -----------------------------------------------------------------------------
# Obtener de: Supabase Dashboard → Settings → API
SUPABASE_URL=https://[PROJECT_REF].supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJI...       # Clave pública (anon)
SUPABASE_SERVICE_KEY=eyJhbGciOiJI...   # Clave privada (solo backend)

# -----------------------------------------------------------------------------
# REDIS (Celery Broker + Cache)
# -----------------------------------------------------------------------------
# Local: redis://localhost:6379/0
# Producción: usar Upstash, Railway, o similar
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# -----------------------------------------------------------------------------
# CLOUDFLARE R2 (Object Storage)
# -----------------------------------------------------------------------------
# Obtener de: Cloudflare Dashboard → R2 → Manage R2 API Tokens
R2_ACCOUNT_ID=your_account_id
R2_ACCESS_KEY_ID=your_access_key
R2_SECRET_ACCESS_KEY=your_secret_key
R2_BUCKET_NAME=forestguard-images
R2_PUBLIC_URL=https://pub-xxx.r2.dev   # URL pública del bucket

# -----------------------------------------------------------------------------
# APIs EXTERNAS
# -----------------------------------------------------------------------------
# NASA FIRMS - API key para datos NRT (Near Real Time)
# Obtener en: https://firms.modaps.eosdis.nasa.gov/api/area/
FIRMS_API_KEY=your_firms_api_key
NASA_FIRMS_BASE_URL=https://firms.modaps.eosdis.nasa.gov

# Open-Meteo - Gratuita, sin API key
# https://open-meteo.com/
OPEN_METEO_BASE_URL=https://archive-api.open-meteo.com/v1

# Google Earth Engine (opcional, para imágenes Sentinel-2)
# Crear service account en: https://console.cloud.google.com
# IMPORTANTE: Guardar el archivo JSON en secrets/ (nunca commitearlo)
GEE_SERVICE_ACCOUNT=gee-sa@project.iam.gserviceaccount.com
GEE_CREDENTIALS_PATH=./secrets/gee-service-account.json

# -----------------------------------------------------------------------------
# SEGURIDAD
# -----------------------------------------------------------------------------
# Generar con: openssl rand -hex 32
SECRET_KEY=your-super-secret-key-change-in-production
JWT_ALGORITHM=HS256
JWT_EXPIRE_MINUTES=1440                # 24 horas

# CORS - Orígenes permitidos (separados por coma)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,https://forestguard.ar

# Rate limiting
RATE_LIMIT_PER_MINUTE=60               # Requests por minuto por IP

# -----------------------------------------------------------------------------
# CERTIFICADOS (UC-07)
# -----------------------------------------------------------------------------
CERTIFICATE_VALID_DAYS=90              # Vigencia de certificados emitidos
CERTIFICATE_PREFIX=FG-CERT             # Prefijo para números de certificado

# -----------------------------------------------------------------------------
# EMAILS (opcional, para notificaciones)
# -----------------------------------------------------------------------------
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=notifications@forestguard.ar
SMTP_PASSWORD=your-app-password
EMAIL_FROM=ForestGuard <notifications@forestguard.ar>

# -----------------------------------------------------------------------------
# MONITOREO (opcional)
# -----------------------------------------------------------------------------
SENTRY_DSN=https://xxx@sentry.io/xxx   # Error tracking
